import{r as m,z as F,s as t,F as j,U as N,t as S}from"./index-Bp_UmaCL.js";import{C as p}from"./card-CF4LKrxb.js";import{S as f}from"./skeleton-C6b0Brwr.js";import{C as w}from"./clock-BMq5U3Dh.js";import{I as C}from"./indian-rupee-P_EAgJjo.js";function y(e){return e.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase())}function A(e){return typeof e=="number"?e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toLocaleString():String(e??"0")}const g=[{bg:"bg-[#EFF6FF]",text:"text-accent-blue",icon:j},{bg:"bg-[#FFF7ED]",text:"text-accent-amber",icon:w},{bg:"bg-[#F0FDF4]",text:"text-accent-green",icon:C},{bg:"bg-[#FDF2F8]",text:"text-accent-rose",icon:N}],x=[{label:"Total Invoices",value:0},{label:"Pending Review",value:0},{label:"This Month",value:"₹0"},{label:"Active Clients",value:0}];function v({value:e}){const s=m.useRef(null),r=typeof e=="number"?e:parseFloat(String(e).replace(/[^0-9.]/g,"")),d=typeof e=="string"?e.replace(/[0-9.,KMB]+$/g,""):"",o=!isNaN(r)&&r>0;return m.useEffect(()=>{if(!o||!s.current)return;let n;const a=600,l=performance.now();function i(u){const c=Math.min((u-l)/a,1),h=1-Math.pow(1-c,3),b=Math.round(r*h);s.current&&(s.current.textContent=`${d}${b.toLocaleString()}`),c<1&&(n=requestAnimationFrame(i))}return n=requestAnimationFrame(i),()=>cancelAnimationFrame(n)},[r,o,d]),o?t.jsxs("span",{ref:s,children:[d,"0"]}):t.jsx("span",{children:e})}function M({config:e}){const[s,r]=m.useState([]),[d,o]=m.useState(!0);return m.useEffect(()=>{if(!e.endpoint){r(x),o(!1);return}F.get(e.endpoint).then(n=>{var u;const a=((u=n.data)==null?void 0:u.data)||n.data,i=(e.fields||Object.keys(a)).filter(c=>a[c]!==void 0).map(c=>({label:y(c),value:A(a[c])}));r(i.length>0?i:x)}).catch(()=>r(x)).finally(()=>o(!1))},[e.endpoint,e.fields]),d?t.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[0,1,2,3].map(n=>t.jsxs(p,{className:"p-5",children:[t.jsx(f,{className:"h-3 w-20 mb-3"}),t.jsx(f,{className:"h-7 w-16"})]},n))}):t.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:s.map((n,a)=>{const l=g[a%g.length],i=l.icon;return t.jsx(S.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.35,delay:a*.08,ease:[.4,0,.2,1]},children:t.jsx(p,{className:"p-5 hover:shadow-md transition-shadow duration-200",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-xs font-medium text-muted uppercase tracking-wider mb-1",children:n.label}),t.jsx("p",{className:"text-2xl font-semibold text-foreground tabular-nums",children:t.jsx(v,{value:n.value})}),n.trend&&t.jsxs("p",{className:`text-xs font-medium mt-1 ${n.trend.direction==="up"?"text-accent-green":"text-accent-rose"}`,children:[n.trend.direction==="up"?"↑":"↓"," ",n.trend.value,"%"]})]}),t.jsx("div",{className:`shrink-0 p-2.5 rounded-xl ${l.bg}`,children:t.jsx(i,{className:`h-5 w-5 ${l.text}`})})]})})},n.label)})})}export{M as default};
