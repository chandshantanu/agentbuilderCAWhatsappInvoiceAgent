import{u as b,o as p,q as j,r,s as e,v}from"./index-Bp_UmaCL.js";function S(){const{config:n}=b(),{supabase:t,user:i,isAuthenticated:N}=p(),c=j(),[d,m]=r.useState(!1),[g,u]=r.useState(!1),[x,l]=r.useState(""),a=((n==null?void 0:n.branding)||{}).primary_color||"#2563eb",o=(i==null?void 0:i.email)||"";r.useEffect(()=>{if(!t)return;const s=setInterval(async()=>{var h;const{data:y}=await t.auth.getUser();(h=y.user)!=null&&h.email_confirmed_at&&(await t.auth.refreshSession(),c("/checkout",{replace:!0}))},3e3);return()=>clearInterval(s)},[t,c]);const f=async()=>{if(!(!t||!o)){m(!0),l(""),u(!1);try{const{error:s}=await t.auth.resend({type:"signup",email:o});s?l(s.message):u(!0)}catch(s){l(s.message||"Failed to resend")}finally{m(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsx("div",{className:"w-full max-w-sm",children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 shadow-sm text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-5",style:{backgroundColor:`${a}15`},children:e.jsx("svg",{className:"w-7 h-7",style:{color:a},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Check your email"}),e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"We sent a verification link to"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-6",children:o}),e.jsx("p",{className:"text-xs text-gray-400 mb-6",children:"Click the link in the email to verify your account. This page will automatically redirect once verified."}),x&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 rounded-lg p-3 mb-4",children:x}),g&&e.jsx("div",{className:"text-sm text-green-700 bg-green-50 rounded-lg p-3 mb-4",children:"Verification email resent!"}),e.jsx("button",{onClick:f,disabled:d,className:"w-full py-2.5 rounded-lg text-white font-medium text-sm disabled:opacity-50 mb-3",style:{backgroundColor:a},children:d?"Sending...":"Resend verification email"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Wrong email?"," ",e.jsx(v,{to:"/signup",className:"font-medium",style:{color:a},children:"Sign up again"})]})]})})})}export{S as default};
