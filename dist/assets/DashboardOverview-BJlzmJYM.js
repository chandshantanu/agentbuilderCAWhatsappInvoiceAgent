import{r as l,z as p,s as e,l as j,T as b,U as N}from"./index-Bp_UmaCL.js";import{B as r}from"./badge-BsIsCzmH.js";import{L as g}from"./loader-2-B7eL5lYw.js";import{M as v}from"./message-circle-DHGaqNaA.js";import{B as w}from"./book-open-BlF9Aztt.js";import{I as y}from"./instagram-DmxKHDe2.js";import{F as _}from"./flame-D-atu0oC.js";import"./index-CvZeWDWn.js";function $({config:M}){const[n,x]=l.useState(null),[o,h]=l.useState(!0);if(l.useEffect(()=>{p.get("/api/dashboard/overview").then(s=>x(s.data)).catch(s=>console.error("Failed to load overview:",s)).finally(()=>h(!1))},[]),o)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(g,{className:"w-8 h-8 animate-spin text-neutral-400"})});if(!n)return e.jsx("div",{className:"text-center text-neutral-500 py-8",children:"Failed to load dashboard data"});const{kpis:t,deal_funnel:i,lead_distribution:a,recent_conversations:d}=n,u=s=>s>=70?"text-emerald-600 bg-emerald-50":s>=30?"text-amber-600 bg-amber-50":"text-neutral-500 bg-neutral-50",f=["new","qualified","proposal","negotiation","won","lost"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-500 mb-2",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Conversations"})]}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:t.total_conversations})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-500 mb-2",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Products"})]}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:t.total_products})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-500 mb-2",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"KB Articles"})]}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:t.total_kb_articles})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-500 mb-2",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Instagram"})]}),e.jsx(r,{className:t.ig_connected?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700",children:t.ig_connected?"Connected":"Disconnected"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-5",children:[e.jsxs("h3",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-orange-500"}),"Lead Distribution"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-neutral-600",children:"Hot Leads (70+)"}),e.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:a.hot})]}),e.jsx("div",{className:"w-full h-2 bg-neutral-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${Math.min(100,a.hot/Math.max(1,t.total_conversations)*100)}%`}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-neutral-600",children:"Warm Leads (30-69)"}),e.jsx("span",{className:"text-sm font-semibold text-amber-600",children:a.warm})]}),e.jsx("div",{className:"w-full h-2 bg-neutral-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500 rounded-full",style:{width:`${Math.min(100,a.warm/Math.max(1,t.total_conversations)*100)}%`}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-neutral-600",children:"Cold Leads (<30)"}),e.jsx("span",{className:"text-sm font-semibold text-neutral-500",children:a.cold})]}),e.jsx("div",{className:"w-full h-2 bg-neutral-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-neutral-400 rounded-full",style:{width:`${Math.min(100,a.cold/Math.max(1,t.total_conversations)*100)}%`}})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-5",children:[e.jsxs("h3",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-blue-500"}),"Deal Pipeline"]}),e.jsx("div",{className:"space-y-2",children:f.map(s=>e.jsxs("div",{className:"flex items-center justify-between py-1.5",children:[e.jsx("span",{className:"text-sm text-neutral-600 capitalize",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-neutral-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${Math.min(100,(i[s]||0)/Math.max(1,t.total_conversations)*100)}%`}})}),e.jsx("span",{className:"text-sm font-medium text-neutral-900 w-8 text-right",children:i[s]||0})]})]},s))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-neutral-200 p-5",children:[e.jsxs("h3",{className:"font-semibold text-neutral-900 mb-4 flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4 text-purple-500"}),"Recent Conversations"]}),d.length===0?e.jsx("p",{className:"text-sm text-neutral-500 text-center py-4",children:"No conversations yet"}):e.jsx("div",{className:"divide-y divide-neutral-100",children:d.map(s=>{var c;return e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center text-white text-xs font-medium",children:(s.username||s.sender_id).slice(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-neutral-900",children:["@",s.username||s.sender_id]}),e.jsx("p",{className:"text-xs text-neutral-500 truncate max-w-[200px]",children:s.lastMessage})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(c=s.tags)==null?void 0:c.slice(0,2).map(m=>e.jsx(r,{variant:"outline",className:"text-xs",children:m},m)),e.jsx(r,{className:u(s.lead_score),children:s.lead_score})]})]},s.sender_id)})})]})]})}export{$ as default};
