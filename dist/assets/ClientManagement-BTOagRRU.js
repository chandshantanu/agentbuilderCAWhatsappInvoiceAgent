import{r as a,s as e,j as q,U as W,X as me,F as he}from"./index-Bp_UmaCL.js";import{u as re,L as d,S as te,a as ae,b as ne,c as le,d as Y}from"./select-Crm1tiLE.js";import{B as i,I as x}from"./input-GzHbweEW.js";import{B as ee}from"./badge-BsIsCzmH.js";import{S as w}from"./skeleton-C6b0Brwr.js";import{D as M,a as V,b as H,c as X,d as Z}from"./dialog-lCjlVtjM.js";import{c as m}from"./caInvoiceService-09kBxQwV.js";import{A as ue}from"./alert-triangle-Dll20bIf.js";import{P as se}from"./plus-CPAcQCsh.js";import{S as je}from"./search-hwF9FksX.js";import{C as ie}from"./chevron-right-Bat6XS3b.js";import{M as ce,B as de}from"./map-pin-BO0ToYar.js";import{A as pe}from"./arrow-left-BmyiyaPF.js";import{P as ve}from"./pencil-BHU7Umvg.js";import{C as ge}from"./chevron-down-CrnT9gvK.js";import"./index-CvZeWDWn.js";const oe=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t);function Ne({clientId:t}){const[l,c]=a.useState({invoiceCount:0,pendingCount:0,totalAmount:0,lastDate:null}),[r,o]=a.useState(!0);if(a.useEffect(()=>{let n=!1;return(async()=>{try{const[j,N]=await Promise.all([m.listInvoices({client_id:t,limit:1}),m.listInvoices({client_id:t,status:"pending_review",limit:1})]),C=await m.listInvoices({client_id:t,limit:100});if(n)return;const h=(C.data||[]).reduce((B,b)=>{var u;return B+(((u=b.totals)==null?void 0:u.grand_total)||0)},0),f=(C.data||[])[0];c({invoiceCount:j.total||0,pendingCount:N.total||0,totalAmount:h,lastDate:(f==null?void 0:f.invoice_date)||null})}catch{}finally{n||o(!1)}})(),()=>{n=!0}},[t]),r)return e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(w,{className:"h-16"}),e.jsx(w,{className:"h-16"}),e.jsx(w,{className:"h-16"}),e.jsx(w,{className:"h-16"})]});const v=[{label:"Total Invoices",value:l.invoiceCount},{label:"Pending Review",value:l.pendingCount},{label:"Total Amount",value:oe(l.totalAmount)},{label:"Last Invoice",value:l.lastDate||"N/A"}];return e.jsx("div",{className:"grid grid-cols-2 gap-3",children:v.map(n=>e.jsxs("div",{className:"bg-neutral-50/80 rounded-lg p-3 border border-neutral-100",children:[e.jsx("p",{className:"text-xs text-neutral-500",children:n.label}),e.jsx("p",{className:"font-semibold text-neutral-900 mt-0.5",children:n.value})]},n.label))})}function fe({branch:t,onAddPhone:l,onRemovePhone:c}){var v;const[r,o]=a.useState(!1);return e.jsxs("div",{className:"border border-neutral-200 rounded-lg",children:[e.jsxs("button",{onClick:()=>o(!r),className:"w-full flex items-center justify-between p-3 text-left hover:bg-neutral-50 transition-colors rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx(de,{className:"h-4 w-4 text-neutral-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:t.name}),t.address&&e.jsx("p",{className:"text-xs text-neutral-500",children:t.address})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{variant:"outline",className:"text-xs",children:[((v=t.phone_numbers)==null?void 0:v.length)||0," phones"]}),r?e.jsx(ge,{className:"h-4 w-4 text-neutral-400"}):e.jsx(ie,{className:"h-4 w-4 text-neutral-400"})]})]}),r&&e.jsx("div",{className:"px-3 pb-3 border-t border-neutral-100",children:e.jsxs("div",{className:"mt-2 space-y-1.5",children:[t.state_code&&e.jsxs("p",{className:"text-xs text-neutral-500 flex items-center gap-1.5",children:[e.jsx(ce,{className:"h-3 w-3"})," State Code: ",t.state_code]}),(t.phone_numbers||[]).length>0?e.jsx("div",{className:"space-y-1",children:t.phone_numbers.map(n=>e.jsxs("div",{className:"flex items-center justify-between bg-neutral-50 rounded px-2.5 py-1.5",children:[e.jsxs("span",{className:"text-xs font-mono text-neutral-700 flex items-center gap-1.5",children:[e.jsx(q,{className:"h-3 w-3 text-neutral-400"})," ",n]}),e.jsx("button",{onClick:()=>c(t.id,n),className:"p-0.5 text-gray-400 hover:text-red-500 transition-colors","aria-label":"Remove phone",children:e.jsx(me,{className:"h-3 w-3"})})]},n))}):e.jsx("p",{className:"text-xs text-neutral-400 italic",children:"No phone numbers mapped"}),e.jsxs(i,{size:"sm",variant:"ghost",className:"text-xs gap-1 mt-1",onClick:()=>l(t.id),children:[e.jsx(se,{className:"h-3 w-3"})," Add Phone"]})]})})]})}function be({clientId:t}){const[l,c]=a.useState([]),[r,o]=a.useState(!0);if(a.useEffect(()=>{let n=!1;return(async()=>{try{const j=await m.listInvoices({client_id:t,limit:5});n||c(j.data||[])}catch{}finally{n||o(!1)}})(),()=>{n=!0}},[t]),r)return e.jsx(w,{className:"h-24"});if(l.length===0)return e.jsx("p",{className:"text-xs text-neutral-400 italic py-3",children:"No invoices yet"});const v={pending_review:"bg-amber-100 text-amber-800",approved:"bg-emerald-100 text-emerald-800",rejected:"bg-red-100 text-red-800",exported:"bg-blue-100 text-blue-800"};return e.jsx("div",{className:"space-y-1.5",children:l.map(n=>{var j;return e.jsxs("div",{className:"flex items-center justify-between bg-neutral-50/80 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2.5 min-w-0",children:[e.jsx(he,{className:"h-3.5 w-3.5 text-neutral-400 shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-neutral-900 truncate",children:n.invoice_number||"No #"}),e.jsx("p",{className:"text-[10px] text-neutral-500",children:n.invoice_date})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("span",{className:"text-xs font-mono text-neutral-700",children:oe(((j=n.totals)==null?void 0:j.grand_total)||0)}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${v[n.status]||"bg-neutral-100 text-neutral-600"}`,children:n.status.replace("_"," ")})]})]},n.id)})})}function Ce({client:t,onBack:l,onRefresh:c}){const{toast:r}=re(),[o,v]=a.useState([]),[n,j]=a.useState(!0),[N,C]=a.useState(!1),[h,f]=a.useState(t.name),[B,b]=a.useState(t.gstin||""),[u,P]=a.useState(t.pan||""),[E,R]=a.useState(t.address||""),[D,O]=a.useState(t.state_code||""),[G,S]=a.useState(!1),[I,y]=a.useState(null),[A,F]=a.useState(""),[g,U]=a.useState(""),[T,L]=a.useState(""),[k,z]=a.useState(""),p=a.useCallback(async()=>{j(!0);try{const s=await m.listBranches(t.id);v(s)}catch{}finally{j(!1)}},[t.id]);a.useEffect(()=>{p()},[p]);const J=async()=>{try{await m.updateClient(t.id,{name:h,gstin:B||void 0,pan:u||void 0,address:E||void 0,state_code:D||void 0}),r({title:"Client updated"}),C(!1),c()}catch(s){r({title:"Error",description:s.message,variant:"destructive"})}},K=async()=>{if(A)try{await m.createBranch(t.id,{name:A,address:g||void 0,state_code:T||void 0}),r({title:"Branch created"}),S(!1),F(""),U(""),L(""),p()}catch(s){r({title:"Error",description:s.message,variant:"destructive"})}},Q=async()=>{if(!(!I||!k))try{await m.addPhoneToClient(t.id,{phone_number:k,branch_id:I}),r({title:"Phone added"}),y(null),z(""),p(),c()}catch(s){r({title:"Error",description:s.message,variant:"destructive"})}},$=async(s,_)=>{try{await m.removePhoneFromClient(t.id,_),r({title:"Phone removed"}),p(),c()}catch(xe){r({title:"Error",description:xe.message,variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:l,className:"p-1.5 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors md:hidden","aria-label":"Back to client list",children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 truncate",children:t.name}),t.gstin&&e.jsx("p",{className:"text-xs font-mono text-neutral-500",children:t.gstin})]}),e.jsxs(i,{size:"sm",variant:"ghost",onClick:()=>C(!N),className:"gap-1.5 shrink-0",children:[e.jsx(ve,{className:"h-3.5 w-3.5"}),N?"Cancel":"Edit"]})]}),N?e.jsxs("div",{className:"rounded-xl border bg-white p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx(d,{className:"text-xs",children:"Company Name"}),e.jsx(x,{value:h,onChange:s=>f(s.target.value),className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(d,{className:"text-xs",children:"GSTIN"}),e.jsx(x,{value:B,onChange:s=>b(s.target.value.toUpperCase()),maxLength:15,className:"mt-1 font-mono text-xs"})]}),e.jsxs("div",{children:[e.jsx(d,{className:"text-xs",children:"PAN"}),e.jsx(x,{value:u,onChange:s=>P(s.target.value.toUpperCase()),maxLength:10,className:"mt-1 font-mono text-xs"})]})]}),e.jsxs("div",{children:[e.jsx(d,{className:"text-xs",children:"Address"}),e.jsx(x,{value:E,onChange:s=>R(s.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(d,{className:"text-xs",children:"State Code"}),e.jsx(x,{value:D,onChange:s=>O(s.target.value),maxLength:2,className:"mt-1 w-20"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(i,{size:"sm",onClick:J,children:"Save"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>C(!1),children:"Cancel"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.pan&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-500",children:"PAN"}),e.jsx("p",{className:"font-mono text-xs text-neutral-900",children:t.pan})]}),t.address&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-xs text-neutral-500",children:"Address"}),e.jsx("p",{className:"text-sm text-neutral-900",children:t.address})]}),t.state_code&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-500",children:"State Code"}),e.jsx("p",{className:"text-neutral-900",children:t.state_code})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-3",children:"Statistics"}),e.jsx(Ne,{clientId:t.id})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Branches"}),e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>S(!0),className:"gap-1 text-xs",children:[e.jsx(se,{className:"h-3 w-3"})," Add Branch"]})]}),n?e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{className:"h-14"}),e.jsx(w,{className:"h-14"})]}):o.length>0?e.jsx("div",{className:"space-y-2",children:o.map(s=>e.jsx(fe,{branch:s,onAddPhone:y,onRemovePhone:$},s.id))}):e.jsxs("div",{className:"text-center py-6 bg-neutral-50 rounded-xl border border-dashed border-neutral-200",children:[e.jsx(de,{className:"h-8 w-8 text-neutral-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-neutral-500",children:"No branches yet"}),e.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Add a branch to organize phone numbers by location"})]}),(t.phones||[]).filter(s=>!s.branch_id).length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-neutral-500 mb-1.5",children:"Direct phones (no branch)"}),e.jsx("div",{className:"space-y-1",children:t.phones.filter(s=>!s.branch_id).map(s=>e.jsxs("div",{className:"flex items-center gap-2 bg-neutral-50 rounded px-2.5 py-1.5",children:[e.jsx(q,{className:"h-3 w-3 text-neutral-400"}),e.jsx("span",{className:"text-xs font-mono text-neutral-700",children:s.number}),e.jsx(ee,{variant:"outline",className:"text-[10px]",children:s.label})]},s.number))})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-3",children:"Recent Invoices"}),e.jsx(be,{clientId:t.id})]}),e.jsx(M,{open:G,onOpenChange:S,children:e.jsxs(V,{children:[e.jsx(H,{children:e.jsx(X,{children:"Add Branch"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Branch Name *"}),e.jsx(x,{value:A,onChange:s=>F(s.target.value),placeholder:"Head Office"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Address"}),e.jsx(x,{value:g,onChange:s=>U(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{children:"State Code"}),e.jsx(x,{value:T,onChange:s=>L(s.target.value),maxLength:2,className:"w-20"})]})]}),e.jsxs(Z,{children:[e.jsx(i,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),e.jsx(i,{onClick:K,disabled:!A,children:"Create"})]})]})}),e.jsx(M,{open:!!I,onOpenChange:()=>y(null),children:e.jsxs(V,{children:[e.jsx(H,{children:e.jsx(X,{children:"Add Phone Number"})}),e.jsxs("div",{children:[e.jsx(d,{children:"Phone Number"}),e.jsx(x,{value:k,onChange:s=>z(s.target.value),placeholder:"9876543210"})]}),e.jsxs(Z,{children:[e.jsx(i,{variant:"outline",onClick:()=>y(null),children:"Cancel"}),e.jsx(i,{onClick:Q,disabled:!k,children:"Add"})]})]})})]})}function we({client:t,isSelected:l,onClick:c}){var o;const r=((o=t.phones)==null?void 0:o.length)||0;return e.jsxs("button",{onClick:c,className:`w-full text-left p-3.5 rounded-lg border transition-all ${l?"border-indigo-300 bg-indigo-50/40 shadow-sm":"border-neutral-200 hover:border-neutral-300 hover:bg-neutral-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-sm text-neutral-900 truncate",children:t.name}),t.gstin&&e.jsx("p",{className:"text-[10px] font-mono text-neutral-500 mt-0.5",children:t.gstin})]}),e.jsx(ie,{className:"h-4 w-4 text-neutral-300 shrink-0 mt-0.5"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[r>0&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-neutral-500",children:[e.jsx(q,{className:"h-3 w-3"})," ",r]}),t.state_code&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-neutral-500",children:[e.jsx(ce,{className:"h-3 w-3"})," ",t.state_code]})]})]})}function Oe({config:t}){const{toast:l}=re(),[c,r]=a.useState([]),[o,v]=a.useState([]),[n,j]=a.useState(!0),[N,C]=a.useState(""),[h,f]=a.useState(null),[B,b]=a.useState(!1),[u,P]=a.useState(null),[E,R]=a.useState(""),[D,O]=a.useState(""),[G,S]=a.useState(""),[I,y]=a.useState(""),[A,F]=a.useState(""),[g,U]=a.useState(""),[T,L]=a.useState(""),[k,z]=a.useState([]),p=a.useCallback(async()=>{j(!0);try{const[s,_]=await Promise.all([m.listClients({search:N||void 0}),m.listUnknownSenders()]);r(s.data||[]),v(_||[])}catch(s){l({title:"Error",description:s.message,variant:"destructive"})}finally{j(!1)}},[N,l]);a.useEffect(()=>{p()},[p]),a.useEffect(()=>{if(!g){z([]);return}m.listBranches(g).then(z).catch(()=>{})},[g]);const J=async()=>{try{const s=await m.createClient({name:E,gstin:D||void 0,pan:G||void 0,address:I||void 0,state_code:A||void 0});l({title:"Client created"}),b(!1),$(),p(),s!=null&&s.id&&f(s)}catch(s){l({title:"Error",description:s.message,variant:"destructive"})}},K=async()=>{if(!(!u||!g))try{await m.assignUnknownSender(u.id,{client_id:g,branch_id:T||void 0}),l({title:`Phone ${u.phone_number} assigned`}),P(null),U(""),L(""),p()}catch(s){l({title:"Error",description:s.message,variant:"destructive"})}},Q=async s=>{try{await m.ignoreUnknownSender(s.id),l({title:"Sender ignored"}),p()}catch(_){l({title:"Error",description:_.message,variant:"destructive"})}},$=()=>{R(""),O(""),S(""),y(""),F("")};return e.jsxs("div",{className:"space-y-4",children:[o.length>0&&e.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50/60 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-amber-200/70",children:[e.jsx(ue,{className:"h-4 w-4 text-amber-600 shrink-0"}),e.jsx("span",{className:"text-sm font-semibold text-amber-900",children:"Unknown Senders"}),e.jsx("span",{className:"ml-1 px-2 py-0.5 rounded-full text-[10px] font-semibold bg-amber-200 text-amber-900",children:o.length}),e.jsx("p",{className:"text-xs text-amber-700 ml-1",children:"Phones sending invoices not yet mapped to a client"})]}),e.jsx("div",{className:"p-3 space-y-2",children:o.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg px-3 py-2.5 border border-amber-100",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(q,{className:"h-4 w-4 text-amber-500 shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-mono font-medium text-neutral-900",children:s.phone_number}),e.jsxs("p",{className:"text-xs text-neutral-500",children:[s.sender_name||"Unknown"," · ",s.message_count," messages · Last: ",new Date(s.last_message_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-1.5 shrink-0",children:[e.jsx(i,{size:"sm",variant:"outline",className:"text-xs border-amber-300 hover:bg-amber-50",onClick:()=>P(s),children:"Assign"}),e.jsx(i,{size:"sm",variant:"ghost",className:"text-xs text-neutral-500",onClick:()=>Q(s),children:"Ignore"})]})]},s.id))})]}),e.jsxs("div",{className:"flex gap-4 min-h-[500px]",children:[e.jsx("div",{className:`${h?"hidden md:flex":"flex"} flex-col w-full md:w-[340px] md:min-w-[340px] shrink-0`,children:e.jsxs("div",{className:"flex-1 flex flex-col rounded-xl border bg-white overflow-hidden",children:[e.jsxs("div",{className:"px-4 pt-4 pb-3 border-b border-neutral-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-neutral-500"}),e.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:"Clients"}),e.jsx(ee,{variant:"outline",className:"text-xs",children:c.length})]}),e.jsxs(i,{size:"sm",onClick:()=>b(!0),className:"gap-1 text-xs",children:[e.jsx(se,{className:"h-3 w-3"})," Add"]})]}),e.jsxs("div",{className:"relative mt-3",children:[e.jsx(je,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-neutral-400"}),e.jsx(x,{placeholder:"Search clients...",value:N,onChange:s=>C(s.target.value),className:"pl-8 h-9"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:n?e.jsx("div",{className:"space-y-2",children:[...Array(4)].map((s,_)=>e.jsx(w,{className:"h-16"},_))}):c.length>0?c.map(s=>e.jsx(we,{client:s,isSelected:(h==null?void 0:h.id)===s.id,onClick:()=>f(s)},s.id)):e.jsxs("div",{className:"text-center py-10",children:[e.jsx(W,{className:"h-10 w-10 text-neutral-200 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-neutral-500",children:"No clients yet"}),e.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Add your first client to start mapping phone numbers"}),e.jsx(i,{size:"sm",variant:"outline",className:"mt-4",onClick:()=>b(!0),children:"Add Client"})]})})]})}),e.jsx("div",{className:`${h?"flex":"hidden md:flex"} flex-col flex-1`,children:e.jsx("div",{className:"flex-1 rounded-xl border bg-white overflow-y-auto p-5",children:h?e.jsx(Ce,{client:h,onBack:()=>f(null),onRefresh:p},h.id):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px] text-center",children:[e.jsx(W,{className:"h-12 w-12 text-neutral-200 mb-3"}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Select a client to view details"}),e.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Client info, branches, phones, and invoices will appear here"})]})})})]}),e.jsx(M,{open:B,onOpenChange:b,children:e.jsxs(V,{children:[e.jsx(H,{children:e.jsx(X,{children:"Add Client"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Client / Company Name *"}),e.jsx(x,{value:E,onChange:s=>R(s.target.value),placeholder:"ABC Enterprises"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"GSTIN"}),e.jsx(x,{value:D,onChange:s=>O(s.target.value.toUpperCase()),placeholder:"27ABCDE1234F1Z5",maxLength:15})]}),e.jsxs("div",{children:[e.jsx(d,{children:"PAN"}),e.jsx(x,{value:G,onChange:s=>S(s.target.value.toUpperCase()),placeholder:"ABCDE1234F",maxLength:10})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Address"}),e.jsx(x,{value:I,onChange:s=>y(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(d,{children:"State Code"}),e.jsx(x,{value:A,onChange:s=>F(s.target.value),placeholder:"27",maxLength:2,className:"w-20"})]})]}),e.jsxs(Z,{children:[e.jsx(i,{variant:"outline",onClick:()=>{b(!1),$()},children:"Cancel"}),e.jsx(i,{onClick:J,disabled:!E,children:"Create"})]})]})}),e.jsx(M,{open:!!u,onOpenChange:()=>P(null),children:e.jsxs(V,{children:[e.jsx(H,{children:e.jsxs(X,{children:["Assign ",u==null?void 0:u.phone_number," to Client"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Select Client"}),e.jsxs(te,{value:g,onValueChange:s=>{U(s),L("")},children:[e.jsx(ae,{children:e.jsx(ne,{placeholder:"Choose a client..."})}),e.jsx(le,{children:c.map(s=>e.jsx(Y,{value:s.id,children:s.name},s.id))})]})]}),k.length>0&&e.jsxs("div",{children:[e.jsx(d,{children:"Branch (optional)"}),e.jsxs(te,{value:T,onValueChange:L,children:[e.jsx(ae,{children:e.jsx(ne,{placeholder:"Select branch..."})}),e.jsxs(le,{children:[e.jsx(Y,{value:"none",children:"No branch"}),k.map(s=>e.jsx(Y,{value:s.id,children:s.name},s.id))]})]})]})]}),e.jsxs(Z,{children:[e.jsx(i,{variant:"outline",onClick:()=>P(null),children:"Cancel"}),e.jsx(i,{onClick:K,disabled:!g,children:"Assign"})]})]})})]})}export{Oe as default};
