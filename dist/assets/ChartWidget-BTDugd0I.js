import{r as p,z as g,s as e,t as B}from"./index-Bp_UmaCL.js";import{C as k,a as L,b,c as w}from"./card-CF4LKrxb.js";import{S as v}from"./skeleton-C6b0Brwr.js";import{aQ as K,aD as S,ar as f,as as u,ad as x,av as O,aC as E,au as G,aM as W,aL as F,C as R}from"./AreaChart-C2i276wS.js";import{C,a as T,L as A}from"./LineChart-Cv-8Dz98.js";import{B as D}from"./bar-chart-3-sG18jGHf.js";const N=["#8B5CF6","#6366F1","#EC4899","#F59E0B","#10B981","#3B82F6"];function m({active:s,payload:t,label:h}){return!s||!(t!=null&&t.length)?null:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-border px-3 py-2 text-xs",children:[e.jsx("p",{className:"font-medium text-foreground mb-0.5",children:h}),t.map((a,l)=>e.jsxs("p",{style:{color:a.color},className:"font-medium",children:[a.name,": ",typeof a.value=="number"?a.value.toLocaleString():a.value]},l))]})}function P(){return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"p-3 rounded-xl bg-surface-raised mb-3",children:e.jsx(D,{className:"h-6 w-6 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:"No data available yet"}),e.jsx("p",{className:"text-xs text-muted-foreground max-w-[240px]",children:"Chart data will appear here once your agent starts processing."})]})}const y={strokeDasharray:"4 4",stroke:"var(--color-border)",strokeOpacity:.6},i={fontSize:11,fill:"var(--color-muted)"};function Y({config:s}){const[t,h]=p.useState([]),[a,l]=p.useState(!0);p.useEffect(()=>{if(!s.endpoint){l(!1);return}g.get(s.endpoint).then(o=>{var n;return h(((n=o.data)==null?void 0:n.data)||o.data||[])}).catch(o=>console.error("ChartWidget fetch error:",o)).finally(()=>l(!1))},[s.endpoint]);const j=s.chart_type||"line",d=s.dataKey||"value",c=s.xKey||"name",r=s.color||"var(--color-primary, #8B5CF6)";return a?e.jsxs(k,{children:[e.jsx(L,{className:"pb-2",children:s.title&&e.jsx(v,{className:"h-4 w-32"})}),e.jsx(b,{children:e.jsx(v,{className:"h-56 w-full rounded-lg"})})]}):e.jsx(B.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1]},children:e.jsxs(k,{children:[s.title&&e.jsx(L,{className:"pb-2",children:e.jsx(w,{className:"text-sm font-medium text-foreground",children:s.title})}),e.jsx(b,{className:s.title?"":"pt-6",children:t.length===0?e.jsx(P,{}):e.jsx(K,{width:"100%",height:260,children:j==="bar"?e.jsxs(S,{data:t,children:[e.jsx(C,{...y}),e.jsx(f,{dataKey:c,tick:i,axisLine:!1,tickLine:!1}),e.jsx(u,{tick:i,axisLine:!1,tickLine:!1}),e.jsx(x,{content:e.jsx(m,{})}),e.jsx(O,{dataKey:d,fill:r,radius:[6,6,0,0]})]}):j==="area"?e.jsxs(E,{data:t,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"areaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:r,stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:r,stopOpacity:0})]})}),e.jsx(C,{...y}),e.jsx(f,{dataKey:c,tick:i,axisLine:!1,tickLine:!1}),e.jsx(u,{tick:i,axisLine:!1,tickLine:!1}),e.jsx(x,{content:e.jsx(m,{})}),e.jsx(G,{type:"monotone",dataKey:d,stroke:r,strokeWidth:2,fill:"url(#areaGradient)"})]}):j==="pie"?e.jsxs(W,{children:[e.jsx(F,{data:t,dataKey:d,nameKey:c,cx:"50%",cy:"50%",outerRadius:90,innerRadius:50,strokeWidth:2,stroke:"#fff",children:t.map((o,n)=>e.jsx(R,{fill:N[n%N.length]},n))}),e.jsx(x,{content:e.jsx(m,{})})]}):e.jsxs(T,{data:t,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"lineGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:r,stopOpacity:.1}),e.jsx("stop",{offset:"95%",stopColor:r,stopOpacity:0})]})}),e.jsx(C,{...y}),e.jsx(f,{dataKey:c,tick:i,axisLine:!1,tickLine:!1}),e.jsx(u,{tick:i,axisLine:!1,tickLine:!1}),e.jsx(x,{content:e.jsx(m,{})}),e.jsx(A,{type:"monotone",dataKey:d,stroke:r,strokeWidth:2,dot:!1,activeDot:{r:4,strokeWidth:2}})]})})})]})})}export{Y as default};
