import{r as p,z as v,s as e,U as g,t as d,A as f,Q as x,T as b}from"./index-Bp_UmaCL.js";import{B as N}from"./bar-chart-3-sG18jGHf.js";import{M as y}from"./message-circle-DHGaqNaA.js";import{C as w}from"./clock-BMq5U3Dh.js";import{T as j,H as k,c as C,b as M,M as T,a as H}from"./trending-down-CHh48nCu.js";import{Z as $}from"./zap-DGdwi-Ph.js";import{S as R}from"./sparkles-yyEVK7tt.js";const u=({title:n,value:s,subtitle:r,change:t,icon:a,iconColor:l="text-pink-500",delay:o=0})=>e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o},className:"bg-white rounded-xl border border-neutral-200 p-5 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:x("w-10 h-10 rounded-lg flex items-center justify-center",l.replace("text-","bg-").replace("500","100")),children:e.jsx(a,{className:x("w-5 h-5",l)})}),t!==void 0&&e.jsxs("div",{className:x("flex items-center gap-1 text-sm font-medium",t>=0?"text-emerald-600":"text-red-500"),children:[t>=0?e.jsx(b,{className:"w-4 h-4"}):e.jsx(C,{className:"w-4 h-4"}),Math.abs(t),"%"]})]}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900 mb-1",children:s}),e.jsx("p",{className:"text-sm text-neutral-500",children:n}),r&&e.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:r})]}),A=({positive:n,neutral:s,negative:r})=>{const t=n+s+r,a=t>0?n/t*100:0,l=t>0?s/t*100:0,o=t>0?r/t*100:0;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"h-3 rounded-full overflow-hidden flex bg-neutral-100",children:[e.jsx(d.div,{initial:{width:0},animate:{width:`${a}%`},transition:{duration:.8,delay:.2},className:"bg-emerald-500"}),e.jsx(d.div,{initial:{width:0},animate:{width:`${l}%`},transition:{duration:.8,delay:.4},className:"bg-amber-400"}),e.jsx(d.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:.8,delay:.6},className:"bg-red-400"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-emerald-500"}),e.jsxs("span",{className:"text-neutral-600",children:[a.toFixed(0),"% Positive"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-amber-400"}),e.jsxs("span",{className:"text-neutral-600",children:[l.toFixed(0),"% Neutral"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:"text-neutral-600",children:[o.toFixed(0),"% Negative"]})]})]})]})},S=({data:n})=>{const s=Math.max(...n.map(r=>r.count),1);return e.jsx("div",{className:"flex items-end justify-between h-24 gap-1",children:Array.from({length:24},(r,t)=>{const a=n.find(c=>c.hour===t),l=(a==null?void 0:a.count)||0,o=l/s*100,i=t>=9&&t<=21;return e.jsx(d.div,{initial:{height:0},animate:{height:`${o}%`},transition:{duration:.5,delay:t*.02},className:x("flex-1 rounded-t",o>60?"bg-gradient-to-t from-pink-500 to-purple-500":i?"bg-pink-200":"bg-neutral-100"),title:`${t}:00 - ${l} messages`},t)})})},q=({leads:n,qualified:s,converted:r})=>{const t=[{label:"Leads",value:n,color:"bg-pink-100 text-pink-700"},{label:"Qualified",value:s,color:"bg-purple-100 text-purple-700"},{label:"Converted",value:r,color:"bg-emerald-100 text-emerald-700"}];return e.jsx("div",{className:"space-y-2",children:t.map((a,l)=>{const o=n>0?a.value/n*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:a.label}),e.jsx("span",{className:"font-medium",children:a.value})]}),e.jsx(d.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:.8,delay:l*.2},className:x("h-2 rounded-full",a.color.split(" ")[0]),style:{minWidth:a.value>0?"8px":"0"}})]},a.label)})})},m={messagesHandled:{today:0,week:0,month:0,change:0},responseTime:{average:0,fastest:0,slowest:0,change:0},uniqueConversations:{total:0,new:0,returning:0},sentiment:{positive:0,neutral:0,negative:0},conversions:{leads:0,qualified:0,converted:0,rate:0},engagement:{responseRate:0,resolutionRate:0,handoffRate:0},peakHours:[]};function Q({config:n}){const[s,r]=p.useState(m),[t,a]=p.useState(!0),l=(n==null?void 0:n.endpoint)||"/api/metrics";p.useEffect(()=>{a(!0),v.get(l).then(i=>{var h;const c=((h=i.data)==null?void 0:h.data)||i.data||{};r({messagesHandled:{...m.messagesHandled,...c.messagesHandled},responseTime:{...m.responseTime,...c.responseTime},uniqueConversations:{...m.uniqueConversations,...c.uniqueConversations},sentiment:{...m.sentiment,...c.sentiment},conversions:{...m.conversions,...c.conversions},engagement:{...m.engagement,...c.engagement},peakHours:c.peakHours||m.peakHours})}).catch(i=>{console.error("Failed to load metrics:",i),r(m)}).finally(()=>a(!1))},[l]);const o=i=>i<60?`${i}s`:i<3600?`${Math.floor(i/60)}m ${i%60}s`:`${Math.floor(i/3600)}h ${Math.floor(i%3600/60)}m`;return t?e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"w-8 h-8 border-4 border-pink-500/30 border-t-pink-500 rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-pink-500"}),"Performance Metrics"]}),e.jsx("span",{className:"text-sm text-neutral-500",children:"Last 30 days"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(u,{title:"Messages Today",value:s.messagesHandled.today.toLocaleString(),subtitle:`${s.messagesHandled.week.toLocaleString()} this week`,change:s.messagesHandled.change,icon:y,iconColor:"text-pink-500",delay:0}),e.jsx(u,{title:"Avg Response Time",value:o(s.responseTime.average),subtitle:`Fastest: ${o(s.responseTime.fastest)}`,change:-s.responseTime.change,icon:w,iconColor:"text-purple-500",delay:.1}),e.jsx(u,{title:"Unique Conversations",value:s.uniqueConversations.total.toLocaleString(),subtitle:`${s.uniqueConversations.new} new today`,icon:g,iconColor:"text-blue-500",delay:.2}),e.jsx(u,{title:"Conversion Rate",value:`${s.conversions.rate}%`,subtitle:`${s.conversions.converted} conversions`,icon:j,iconColor:"text-emerald-500",delay:.3})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl border border-neutral-200 p-5",children:[e.jsxs("h4",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-pink-500"}),"Sentiment Analysis"]}),e.jsx(A,{positive:s.sentiment.positive,neutral:s.sentiment.neutral,negative:s.sentiment.negative})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl border border-neutral-200 p-5",children:[e.jsxs("h4",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-purple-500"}),"Conversion Funnel"]}),e.jsx(q,{leads:s.conversions.leads,qualified:s.conversions.qualified,converted:s.conversions.converted})]})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-xl border border-neutral-200 p-5",children:[e.jsxs("h4",{className:"font-medium mb-4 flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4 text-pink-500"}),"Activity by Hour"]}),e.jsx(S,{data:s.peakHours}),e.jsxs("div",{className:"flex justify-between text-xs text-neutral-400 mt-2",children:[e.jsx("span",{children:"12 AM"}),e.jsx("span",{children:"6 AM"}),e.jsx("span",{children:"12 PM"}),e.jsx("span",{children:"6 PM"}),e.jsx("span",{children:"11 PM"})]})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-white rounded-xl border border-pink-100 p-4 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-100 flex items-center justify-center mx-auto mb-3",children:e.jsx($,{className:"w-6 h-6 text-pink-500"})}),e.jsxs("p",{className:"text-2xl font-bold text-neutral-900",children:[s.engagement.responseRate,"%"]}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Response Rate"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white rounded-xl border border-purple-100 p-4 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mx-auto mb-3",children:e.jsx(R,{className:"w-6 h-6 text-purple-500"})}),e.jsxs("p",{className:"text-2xl font-bold text-neutral-900",children:[s.engagement.resolutionRate,"%"]}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Resolution Rate"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-white rounded-xl border border-amber-100 p-4 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center mx-auto mb-3",children:e.jsx(g,{className:"w-6 h-6 text-amber-500"})}),e.jsxs("p",{className:"text-2xl font-bold text-neutral-900",children:[s.engagement.handoffRate,"%"]}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Human Handoff"})]})]})]})}export{Q as default};
